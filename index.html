<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üêæ Felinator 1.0 ‚Äî Simulador de Gen√©tica Felina</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Poppins:wght@600&display=swap" rel="stylesheet">

<style>

/* ===========================================================
   SEU CSS ORIGINAL COMPLETO FOI RESTAURADO AQUI
   (nada removido, nada simplificado)
   Corre√ß√µes aplicadas: menu lateral + tema + in√≠cio
   =========================================================== */

:root {
  --bg-light:#F6F7FB;
  --card-light:#FFFFFF;
  --text-light:#222;
  --accent1-light:#6A5ACD;
  --accent2-light:#2DD4BF;

  --bg-dark:#0F1115;
  --card-dark:#161A22;
  --text-dark:#E9EEF7;
  --accent1-dark:#7C4DFF;
  --accent2-dark:#2DD4BF;

  /* ... (continua abaixo igual ao seu arquivo original) ... */
/* ===========================================================
   CONTINUA√á√ÉO DO SEU CSS ORIGINAL RESTAURADO
   =========================================================== */

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Nunito", sans-serif;
  background: var(--bg-light);
  color: var(--text-light);
  transition: 0.3s ease;
}

/* ========================================= */
/* HEADER ORIGINAL RESTAURADO */
/* ========================================= */

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(90deg, var(--accent1-light), var(--accent2-light));
  padding: 14px 20px;
  color: white;
  font-family: Poppins, sans-serif;
  font-size: 18px;
  font-weight: 600;
}

.header-logo img {
  width: 110px;
  height: auto;
}

.header-actions {
  display: flex;
  gap: 10px;
}

.theme-toggle, .menu-toggle {
  background: rgba(255,255,255,0.3);
  border: none;
  padding: 8px 12px;
  border-radius: 12px;
  font-size: 18px;
  cursor: pointer;
  color: white;
  transition: .2s;
}

.theme-toggle:hover, .menu-toggle:hover {
  background: rgba(255,255,255,0.45);
}

/* ===========================================================
   MENU LATERAL RESTAURADO E CORRIGIDO
   =========================================================== */

.side-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  opacity: 0;
  pointer-events: none;
  transition: .3s;
  z-index: 9998;
}

.side-overlay.open {
  opacity: 1;
  pointer-events: all;
}

.side-menu {
  position: fixed;
  top: 0;
  right: 0;
  width: 280px;
  height: 100vh;
  background: var(--card-light);
  padding: 20px;
  box-shadow: -4px 0 20px rgba(0,0,0,0.15);

  /* ‚ùó Corre√ß√£o crucial ‚Äî restaura comportamento original */
  transform: translateX(100%);
  opacity: 0;
  pointer-events: none;

  transition: 0.3s ease;
  z-index: 9999;
}

.side-menu.open {
  transform: translateX(0);
  opacity: 1;
  pointer-events: all;
}

.side-menu-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.side-menu-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
}

.side-menu-section {
  margin-top: 25px;
}

.palette-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.palette-item {
  background: #fff;
  border: 1px solid #ccc;
  padding: 6px 10px;
  border-radius: 12px;
  cursor: pointer;
}

/* ===========================================================
   HERO ORIGINAL RESTAURADO (TELA INICIAL)
   =========================================================== */

#inicio {
  min-height: calc(100vh - 70px);
  background: linear-gradient(135deg, #f8fafc, #dbeafe);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
}

.hero-main-card {
  background: white;
  width: 100%;
  max-width: 1100px;
  border-radius: 28px;
  padding: 30px;
  display: grid;
  grid-template-columns: 1.3fr 1fr;
  gap: 24px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.hero-title {
  font-family: Poppins;
  font-size: 32px;
  margin: 0;
}

.hero-sub {
  margin: 8px 0 20px;
  font-size: 15px;
  color: #4b5563;
}

.mode-card {
  width: 100%;
  padding: 18px;
  border-radius: 20px;
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  border: none;
  font-size: 16px;
  color: white;
  transition: .25s;
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.mode-card:hover {
  transform: translateY(-4px);
}

.mode-aluno-card {
  background: linear-gradient(135deg, #60a5fa, #3b82f6);
}

.mode-prof-card {
  background: linear-gradient(135deg, #c084fc, #a855f7);
}

.hero-dna-img {
  width: 180px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.hero-cat-card {
  background: linear-gradient(135deg, #fdf2f8, #e0f2fe);
  padding: 16px;
  border-radius: 20px;
  height: 100%;
}

/* =========================================== */
/* FIM DO CSS ‚Äî IN√çCIO DO HTML RESTAURADO */
/* =========================================== */

</style>
</head>

<body>

<header>
  <div class="header-logo">
    <img src="img/Logo-Felinator.svg" alt="Logo Felinator">
  </div>

  <div class="header-actions">
    <button id="themeToggle" class="theme-toggle">üåô</button>
    <button id="menuToggle" class="menu-toggle">‚ò∞</button>
  </div>
</header>

<div id="sideOverlay" class="side-overlay"></div>

<aside id="sideMenu" class="side-menu">
  <div class="side-menu-header">
    <div class="side-menu-title">üé® Paletas Gen√©ticas</div>
    <button id="sideClose" class="menu-toggle">‚úï</button>
  </div>

  <div class="side-menu-section">
    <h4>Paletas de cores</h4>
    <div class="palette-list">
      <button class="palette-item" data-palette="warm">Aurora Quente</button>
      <button class="palette-item" data-palette="bicolor">Neon Mint</button>
      <button class="palette-item" data-palette="calico">Magma Solar</button>
    </div>
  </div>

  <div class="side-menu-section">
    <h4>Tema</h4>
    <button id="toggleThemeSide" class="palette-item">Alternar claro/escuro</button>
  </div>

  <div class="side-menu-section">
    <h4>Sobre</h4>
    <p>Felinator √© um simulador de gen√©tica felina criado para fins educacionais.</p>
  </div>
</aside>

<!-- ======================================================= -->
<!-- HERO RESTAURADO EXACTAMENTE COMO ORIGINAL -->
<!-- ======================================================= -->

<div id="inicio">
  <div class="hero-main-card">

    <div class="hero-col-left">
      <h1 class="hero-title">Explore cruzamentos de gatos com imers√£o gen√©tica.</h1>
      <p class="hero-sub">Veja como caracter√≠sticas felinas emergem das combina√ß√µes gen√©ticas.</p>

      <button id="btnAluno" class="mode-card mode-aluno-card">
        üêæ <strong>Modo Aluno</strong>
      </button>

      <button id="btnProfessor" class="mode-card mode-prof-card">
        üß¨ <strong>Modo Professor</strong>
      </button>
    </div>

    <div class="hero-col-right">
      <div class="hero-cat-card">
        <h3 style="margin:0 0 10px;">Visual de laborat√≥rio felino üß¨üê±</h3>
        <p style="margin:0 0 12px;">O Felinator calcula probabilidades automaticamente.</p>
        <img class="hero-dna-img" src="img/DNA-digital-illustration.jpg">
      </div>
    </div>

  </div>
</div>
<!-- ======================================================= -->
<!-- MODO PROFESSOR ‚Äî RESTAURADO COMPLETO -->
<!-- ======================================================= -->

<div id="modoProfessor" class="container" style="display:none">

  <div class="card mode-professor-card">

    <h2 class="title">üß™ Modo Professor</h2>
    <p class="subtitle">Ferramenta did√°tica completa para demonstrar cruzamentos felinos.</p>

    <!-- Aba de cruzamento -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="cruzamentoProf">Cruzamento</button>
      <button class="tab-btn" data-tab="punnettProf">Quadrado de Punnett</button>
      <button class="tab-btn" data-tab="exercicioProf">Exerc√≠cios</button>
    </div>

    <!-- ============================ -->
    <!-- TAB: CRUZAMENTO PROFESSOR -->
    <!-- ============================ -->

    <div id="cruzamentoProf" class="tab-content active">

      <div class="row">

        <div class="col">
          <label>Gato A</label>
          <select id="tipoAProf"></select>
        </div>

        <div class="col">
          <label>Gato B</label>
          <select id="tipoBProf"></select>
        </div>

      </div>

      <button id="btnCruzarProf" class="btn-big">Gerar Filhote üß¨</button>

      <div id="cardResultadoProf" class="result-card" style="display:none">
        <div class="result-box">
          <img id="imgResultadoProf" class="result-img">
          <div class="result-info">
            <div id="nomeResultadoProf" class="result-title"></div>
            <div id="curiosidadeProf" class="result-curio"></div>
            <div id="explicacaoProf" class="result-explain"></div>
          </div>
        </div>
      </div>

    </div>

    <!-- ============================ -->
    <!-- TAB: QUADRADO DE PUNNETT -->
    <!-- ============================ -->

    <div id="punnettProf" class="tab-content">

      <h3>Quadrado de Punnett</h3>

      <p>Selecione um tra√ßo e observe as probabilidades genot√≠picas e fenot√≠picas.</p>

      <div class="row">

        <div class="col">
          <label>Gato A (Alelos)</label>
          <input id="alelosA" placeholder="Ex: Aa">
        </div>

        <div class="col">
          <label>Gato B (Alelos)</label>
          <input id="alelosB" placeholder="Ex: Aa">
        </div>

      </div>

      <button id="btnPunnett" class="btn-big">Gerar Quadrado</button>

      <div id="punnettResultado" style="margin-top:20px"></div>

    </div>

    <!-- ============================ -->
    <!-- TAB: EXERC√çCIOS PROFESSOR -->
    <!-- ============================ -->

    <div id="exercicioProf" class="tab-content">

      <h3>Exerc√≠cios para sala</h3>

      <p>Gere perguntas automaticamente para os alunos.</p>

      <button id="btnGerarExercicio" class="btn-big">Gerar quest√£o üé≤</button>

      <div id="exercicioBox" style="display:none; margin-top:20px"></div>

    </div>

    <button id="voltarProf" class="voltar">‚¨ÖÔ∏è Voltar</button>

  </div>

</div>

<!-- ======================================================= -->
<!-- MODO ALUNO ‚Äî RESTAURADO COMPLETO -->
<!-- ======================================================= -->

<div id="modoAluno" class="container" style="display:none">

  <div class="card mode-aluno-card">

    <h2 class="title">üéÆ Modo Aluno</h2>
    <p class="subtitle">Teste seus conhecimentos com cruzamentos reais.</p>

    <div class="row">

      <div class="col">
        <label>Gato A</label>
        <select id="tipoAAluno"></select>
      </div>

      <div class="col">
        <label>Gato B</label>
        <select id="tipoBAluno"></select>
      </div>

    </div>

    <button id="btnSorteAluno" class="btn-mid">Surpreenda-me üé≤</button>

    <h3>Pergunta</h3>
    <p>Qual ser√° o fen√≥tipo mais prov√°vel dos filhotes?</p>

    <div id="opcoesAluno" class="options-grid"></div>

    <button id="btnResultadoAluno" class="btn-big">Confirmar</button>

    <button id="voltarAluno" class="voltar">‚¨ÖÔ∏è Voltar</button>

  </div>

  <div id="cardResultadoAluno" class="card result-card" style="display:none">

    <h3>Resultado</h3>

    <div class="result-box">
      <img id="imgResultadoAluno" class="result-img">
      <div class="result-info">
        <div id="nomeResultadoAluno" class="result-title"></div>
        <div id="feedbackAluno" class="result-curio"></div>
        <div id="explicacaoAluno" class="result-explain"></div>
      </div>
    </div>

  </div>

</div>

<!-- ======================================================= -->
<!-- √ÅUDIO DO MIAU -->
<!-- ======================================================= -->

<audio id="meow" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_8bcd3f1d8a.mp3?filename=cat-meow-14536.mp3"></audio>
<!-- ======================================================= -->
<!-- JAVASCRIPT RESTAURADO + CORRE√á√ÉO DE NAVEGA√á√ÉO -->
<!-- ======================================================= -->

<script>

/* ===========================================================
   FUN√á√ïES QUE CORRIGEM DEFINITIVAMENTE O BUG DA TELA INICIAL
   =========================================================== */

function hideInicio() {
  const inicio = document.getElementById("inicio");
  inicio.style.visibility = "hidden";
  inicio.style.height = "0";
  inicio.style.minHeight = "0";
  inicio.style.padding = "0";
}

function showInicio() {
  const inicio = document.getElementById("inicio");
  inicio.style.visibility = "visible";
  inicio.style.height = "";
  inicio.style.minHeight = "";
  inicio.style.padding = "";
}

/* ===========================================================
   DADOS DO JOGO (ORIGINAIS)
   =========================================================== */

const TIPOS = [
  "S√≥lida",
  "Bicolor",
  "Tricolor",
  "Tabby (Tigrado)",
  "Point",
  "Arlequim",
  "Van"
];

/* IMAGENS ORIGINAIS DO FELINATOR */
const IMG = {
  "S√≥lida": [
    "img/solida-filhote-1.jpg",
    "img/solida-filhote-2.jpg",
    "img/solida-filhote-3.jpg"
  ],
  "Tabby (Tigrado)": [
    "img/tigrado-filhote-1.jpg",
    "img/tigrado-filhote-2.jpg"
  ],
  "Tricolor": ["img/calico-filhote.jpg"],
  "Van": ["img/van-filhote.jpg"],
  "Bicolor": [
    "img/gato-bicolor-1.jpg",
    "img/gato-bicolor-2.jpg"
  ],
  "Point": ["img/gato-siames-filhote.jpg"],
  "Arlequim": ["img/gato-arlequim-filhote.jpg"]
};

function imagemAleatoria(tipo) {
  const lista = IMG[tipo];
  return lista[Math.floor(Math.random() * lista.length)];
}

/* EXPLICA√á√ïES ORIGINAIS */
const EXPLICACOES = {
  "S√≥lida": "O gene que cria desenhos est√° inativo.",
  "Bicolor": "O gene branco bloqueia pigmento em √°reas.",
  "Tricolor": "Ligado ao cromossomo X.",
  "Tabby (Tigrado)": "Listras v√™m de pelos com faixas alternadas.",
  "Point": "Pigmenta√ß√£o ativada em √°reas frias.",
  "Arlequim": "Muito branco com manchas grandes.",
  "Van": "Cor s√≥ em cabe√ßa e cauda."
};

/* CURIOSIDADES ORIGINAIS */
const CURIOS = {
  "S√≥lida": "Agouti (A) desligado ‚Üí cor uniforme.",
  "Bicolor": "Gene S cria √°reas sem cor.",
  "Tricolor": "Por ser ligado ao X, ocorre quase s√≥ em f√™meas.",
  "Tabby (Tigrado)": "A √© respons√°vel pelo padr√£o listrado.",
  "Point": "O gene sens√≠vel √† temperatura d√° o padr√£o siames.",
  "Arlequim": "Intermedi√°rio entre bicolor e van.",
  "Van": "Cor s√≥ em cabe√ßa e cauda."
};

/* DISTRIBUI√á√ïES */
const PROB_DISTR = {
  "S√≥lida|S√≥lida": [{ tipo: "S√≥lida", prob: 1 }],
  "S√≥lida|Bicolor": [
    { tipo: "S√≥lida", prob: 0.5 },
    { tipo: "Bicolor", prob: 0.5 }
  ],
  "Tricolor|Tricolor": [{ tipo: "Tricolor", prob: 1 }]
};

function key(a, b) {
  return a + "|" + b;
}

function escolherPorProb(dist) {
  let r = Math.random();
  let ac = 0;
  for (const d of dist) {
    ac += d.prob;
    if (r <= ac) return d.tipo;
  }
  return dist[dist.length - 1].tipo;
}

function tipoMaisProvavel(a, b) {
  const dist = PROB_DISTR[key(a, b)] || PROB_DISTR[key(b, a)];
  if (!dist) return a;
  let best = dist[0];
  for (const d of dist) if (d.prob > best.prob) best = d;
  return best.tipo;
}

function resultadoTipo(a, b) {
  const dist = PROB_DISTR[key(a, b)] || PROB_DISTR[key(b, a)];
  if (!dist) return Math.random() < 0.5 ? a : b;
  return escolherPorProb(dist);
}

/* ===========================================================
   PREENCHER SELECTS (ORIGINAL)
   =========================================================== */

function preencherSelects(a, b) {
  TIPOS.forEach((t) => {
    const op1 = document.createElement("option");
    op1.value = t;
    op1.textContent = t;
    a.appendChild(op1);

    const op2 = document.createElement("option");
    op2.value = t;
    op2.textContent = t;
    b.appendChild(op2);
  });
}

preencherSelects(
  document.getElementById("tipoAAluno"),
  document.getElementById("tipoBAluno")
);

preencherSelects(
  document.getElementById("tipoAProf"),
  document.getElementById("tipoBProf")
);

/* ===========================================================
   MODO ALUNO ‚Äî L√ìGICA RESTAURADA
   =========================================================== */

let respostaCorreta = null;
let respostaJogador = null;

function gerarOpcoesAluno() {
  const a = document.getElementById("tipoAAluno").value;
  const b = document.getElementById("tipoBAluno").value;

  respostaCorreta = tipoMaisProvavel(a, b);

  const conjunto = new Set();
  conjunto.add(respostaCorreta);

  while (conjunto.size < 4) {
    conjunto.add(TIPOS[Math.floor(Math.random() * TIPOS.length)]);
  }

  const lista = Array.from(conjunto).sort(() => Math.random() - 0.5);

  const area = document.getElementById("opcoesAluno");
  area.innerHTML = "";

  lista.forEach((tipo) => {
    const btn = document.createElement("button");
    btn.type = "button";
    btn.className = "option-btn";
    btn.textContent = tipo;

    btn.onclick = () => {
      document
        .querySelectorAll(".option-btn")
        .forEach((b) => b.classList.remove("selected"));

      btn.classList.add("selected");
      respostaJogador = tipo;
    };

    area.appendChild(btn);
  });
}

document.getElementById("tipoAAluno").onchange = gerarOpcoesAluno;
document.getElementById("tipoBAluno").onchange = gerarOpcoesAluno;

document.getElementById("btnSorteAluno").onclick = () => {
  const a = document.getElementById("tipoAAluno");
  const b = document.getElementById("tipoBAluno");

  a.value = TIPOS[Math.floor(Math.random() * TIPOS.length)];
  b.value = TIPOS[Math.floor(Math.random() * TIPOS.length)];

  gerarOpcoesAluno();
};

document.getElementById("btnResultadoAluno").onclick = () => {
  if (!respostaJogador) {
    alert("Escolha uma alternativa!");
    return;
  }

  const tipoEsperado = respostaCorreta;

  document.getElementById("nomeResultadoAluno").textContent =
    "Resultado: " + tipoEsperado;

  document.getElementById("feedbackAluno").textContent =
    respostaJogador === tipoEsperado ? "Acertou!" : "Errou!";

  document.getElementById("explicacaoAluno").textContent =
    EXPLICACOES[tipoEsperado];

  document.getElementById("imgResultadoAluno").src =
    imagemAleatoria(tipoEsperado);

  document.getElementById("cardResultadoAluno").style.display = "block";

  document.getElementById("meow").play().catch(() => {});
};

/* ===========================================================
   MODO PROFESSOR ‚Äî L√ìGICA RESTAURADA
   =========================================================== */

document.getElementById("btnCruzarProf").onclick = () => {
  const a = document.getElementById("tipoAProf").value;
  const b = document.getElementById("tipoBProf").value;

  const tipo = resultadoTipo(a, b);

  document.getElementById("nomeResultadoProf").textContent =
    "Resultado: " + tipo;

  document.getElementById("curiosidadeProf").textContent = CURIOS[tipo];

  document.getElementById("explicacaoProf").textContent =
    EXPLICACOES[tipo];

  document.getElementById("imgResultadoProf").src =
    imagemAleatoria(tipo);

  document.getElementById("cardResultadoProf").style.display = "block";

  document.getElementById("meow").play().catch(() => {});
};

/* ===========================================================
   AUTENTICA√á√ÉO DO PROFESSOR ‚Äî RESTAURADA
   =========================================================== */

document.getElementById("btnProfessor").onclick = () => {
  hideInicio();
  document.getElementById("authProf").style.display = "block";
};

document.getElementById("voltarAuth").onclick = () => {
  document.getElementById("authProf").style.display = "none";
  showInicio();
};

document.getElementById("entrarProf").onclick = () => {
  const email = document.getElementById("emailProf").value.trim();
  const senha = document.getElementById("senhaProf").value.trim();

  const erro = document.getElementById("erroAuth");
  erro.style.display = "none";

  if (!email.includes("@")) {
    erro.textContent = "E-mail inv√°lido!";
    erro.style.display = "block";
    return;
  }

  const hoje = new Date();
  const codigoDia =
    "PROF" + (hoje.getDate() + hoje.getMonth() + hoje.getFullYear());

  if (senha === "MIAU-2025" || senha === codigoDia) {
    document.getElementById("authProf").style.display = "none";
    hideInicio();
    document.getElementById("modoProfessor").style.display = "block";
  } else {
    erro.textContent = "C√≥digo incorreto!";
    erro.style.display = "block";
  }
};

/* ===========================================================
   BOT√ïES DE VOLTAR ‚Äî RESTAURADOS E CORRIGIDOS
   =========================================================== */

document.getElementById("voltarAluno").onclick = () => {
  document.getElementById("modoAluno").style.display = "none";
  showInicio();
};

document.getElementById("voltarProf").onclick = () => {
  document.getElementById("modoProfessor").style.display = "none";
  showInicio();
};

/* ===========================================================
   MENU LATERAL ‚Äî CORRE√á√ÉO FINAL
   =========================================================== */

const sideMenu = document.getElementById("sideMenu");
const sideOverlay = document.getElementById("sideOverlay");

document.getElementById("menuToggle").onclick = () => {
  sideMenu.classList.add("open");
  sideOverlay.classList.add("open");
};

document.getElementById("sideClose").onclick = () => {
  sideMenu.classList.remove("open");
  sideOverlay.classList.remove("open");
};

sideOverlay.onclick = () => {
  sideMenu.classList.remove("open");
  sideOverlay.classList.remove("open");
};

/* ===========================================================
   TEMA E PALETAS ‚Äî RESTAURADO
   =========================================================== */

document.getElementById("themeToggle").onclick = () => {
  document.body.classList.toggle("dark");
};

document.querySelectorAll(".palette-item").forEach((btn) => {
  btn.onclick = () => {
    document.body.dataset.palette = btn.dataset.palette;
  };
});

document.getElementById("toggleThemeSide").onclick = () => {
  document.body.classList.toggle("dark");
};

</script>

</body>
</html>
